/*! locationpicker.jquery - v0.11.0 - 2015-01-03 */

!function(a){function b(a,b){var c=new google.maps.Map(a,b),d=new google.maps.Marker({position:new google.maps.LatLng(54.19335,-3.92695),map:c,title:"Drag Me",draggable:b.draggable});return{map:c,marker:d,circle:null,location:d.position,radius:b.radius,locationName:b.locationName,addressComponents:{formatted_address:null,addressLine1:null,addressLine2:null,streetName:null,streetNumber:null,city:null,district:null,state:null,stateOrProvince:null},settings:b.settings,domContainer:a,geodecoder:new google.maps.Geocoder}}function c(a){return void 0!=d(a)}function d(b){return a(b).data("locationpicker")}function e(a,b){if(a){var c=g.locationFromLatLng(b.location);a.latitudeInput&&a.latitudeInput.val(c.latitude).change(),a.longitudeInput&&a.longitudeInput.val(c.longitude).change(),a.radiusInput&&a.radiusInput.val(b.radius).change(),a.locationNameInput&&a.locationNameInput.val(b.locationName).change()}}function f(b,c){b&&(b.radiusInput&&b.radiusInput.on("change",function(){c.radius=a(this).val(),g.setPosition(c,c.location,function(a){a.settings.onchanged.apply(c.domContainer,[g.locationFromLatLng(a.location),a.radius,!1])})}),b.locationNameInput&&c.settings.enableAutocomplete&&(c.autocomplete=new google.maps.places.Autocomplete(b.locationNameInput.get(0)),google.maps.event.addListener(c.autocomplete,"place_changed",function(){var a=c.autocomplete.getPlace();return a.geometry?void g.setPosition(c,a.geometry.location,function(a){e(b,a),a.settings.onchanged.apply(c.domContainer,[g.locationFromLatLng(a.location),a.radius,!1])}):void c.settings.onlocationnotfound(a.name)})),b.latitudeInput&&b.latitudeInput.on("change",function(){g.setPosition(c,new google.maps.LatLng(a(this).val(),c.location.lng()),function(a){a.settings.onchanged.apply(c.domContainer,[g.locationFromLatLng(a.location),a.radius,!1])})}),b.longitudeInput&&b.longitudeInput.on("change",function(){g.setPosition(c,new google.maps.LatLng(c.location.lat(),a(this).val()),function(a){a.settings.onchanged.apply(c.domContainer,[g.locationFromLatLng(a.location),a.radius,!1])})}))}var g={drawCircle:function(b,c,d,e){return null!=b.circle&&b.circle.setMap(null),d>0?(d*=1,e=a.extend({strokeColor:"#0000FF",strokeOpacity:.35,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.2},e),e.map=b.map,e.radius=d,e.center=c,b.circle=new google.maps.Circle(e),b.circle):null},setPosition:function(a,b,c){a.location=b,a.marker.setPosition(b),a.map.panTo(b),this.drawCircle(a,b,a.radius,{}),a.settings.enableReverseGeocode?a.geodecoder.geocode({latLng:a.location},function(b,d){d==google.maps.GeocoderStatus.OK&&b.length>0&&(a.locationName=b[0].formatted_address,a.addressComponents=g.address_component_from_google_geocode(b[0].address_components)),c&&c.call(this,a)}):c&&c.call(this,a)},locationFromLatLng:function(a){return{latitude:a.lat(),longitude:a.lng()}},address_component_from_google_geocode:function(a){for(var b={},c=a.length-1;c>=0;c--){var d=a[c];d.types.indexOf("postal_code")>=0?b.postalCode=d.short_name:d.types.indexOf("street_number")>=0?b.streetNumber=d.short_name:d.types.indexOf("route")>=0?b.streetName=d.short_name:d.types.indexOf("locality")>=0?b.city=d.short_name:d.types.indexOf("sublocality")>=0?b.district=d.short_name:d.types.indexOf("administrative_area_level_1")>=0?b.stateOrProvince=d.short_name:d.types.indexOf("country")>=0&&(b.country=d.short_name)}return b.addressLine1=[b.streetNumber,b.streetName].join(" ").trim(),b.addressLine2="",b}};a.fn.locationpicker=function(h,i){if("string"==typeof h){var j=this.get(0);if(!c(j))return;var k=d(j);switch(h){case"location":if(void 0==i){var l=g.locationFromLatLng(k.location);return l.radius=k.radius,l.name=k.locationName,l}i.radius&&(k.radius=i.radius),g.setPosition(k,new google.maps.LatLng(i.latitude,i.longitude),function(a){e(a.settings.inputBinding,a)});break;case"subscribe":if(void 0==i)return null;var m=i.event,n=i.callback;if(!m||!n)return console.error('LocationPicker: Invalid arguments for method "subscribe"'),null;google.maps.event.addListener(k.map,m,n);break;case"map":if(void 0==i){var o=g.locationFromLatLng(k.location);return o.formattedAddress=k.locationName,o.addressComponents=k.addressComponents,{map:k.map,marker:k.marker,location:o}}return null}return null}return this.each(function(){var d=a(this);if(!c(this)){var i=a.extend({},a.fn.locationpicker.defaults,h),j=new b(this,{zoom:i.zoom,center:new google.maps.LatLng(i.location.latitude,i.location.longitude),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,disableDoubleClickZoom:!1,scrollwheel:i.scrollwheel,streetViewControl:!1,radius:i.radius,locationName:i.locationName,settings:i,draggable:i.draggable});d.data("locationpicker",j),google.maps.event.addListener(j.marker,"dragend",function(){g.setPosition(j,j.marker.position,function(a){var b=g.locationFromLatLng(j.location);a.settings.onchanged.apply(j.domContainer,[b,a.radius,!0]),e(j.settings.inputBinding,j)})}),g.setPosition(j,new google.maps.LatLng(i.location.latitude,i.location.longitude),function(a){e(i.inputBinding,j),a.settings.oninitialized(d);g.locationFromLatLng(j.location)}),f(i.inputBinding,j)}})},a.fn.locationpicker.defaults={location:{latitude:40.7324319,longitude:-73.82480799999996},locationName:"",radius:500,zoom:15,scrollwheel:!0,inputBinding:{latitudeInput:null,longitudeInput:null,radiusInput:null,locationNameInput:null},enableAutocomplete:!1,enableReverseGeocode:!0,draggable:!0,onchanged:function(){},onlocationnotfound:function(){},oninitialized:function(){}}}(jQuery);
//# sourceMappingURL=locationpicker.jquery.min.map